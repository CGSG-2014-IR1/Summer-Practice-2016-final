<html>
<head>
  <title>Dark</title>

  <link rel="stylesheet" type="text/css" href="styles.css">

  <script src="js/api/socket.io.js"></script>
  <script src="js/api/three.js"></script>
  <script src="js/api/jquery.js"></script>

  <script src="js/animation/render/resources/texture.js"></script>
  <script src="js/animation/render/resources/shader.js"></script>
  <script src="js/animation/render/resources/material.js"></script>
  <script src="js/animation/render/primitive/prim.js"></script>
  <script src="js/animation/render/primitive/characters.js"></script>
  <script src="js/animation/render/primitive/sprim.js"></script>
  <script src="js/animation/render/render.js"></script>
  <script src="js/animation/timer.js"></script>
  <script src="js/animation/input/keyboard.js"></script>
  <script src="js/animation/anim.js"></script>

  <script src="js/animation/units/environment/unit_skybox.js"></script>
  <script src="js/animation/units/layouts/battlefield_dark.js"></script>
  <script>
    function InitChat( socket )
    {
      $('#chat_form').submit(function()
      {
        var inp = $('#msg');
        socket.emit('chat message', {message: inp.val(), user: 'DARKNESS'});
        inp.val('');
        return false;
      });
      socket.on('chat message', function(msg)
      {
        var msgs = $('#messages');
        msgs.append("<li>" + "[" + msg.user + "]: " + msg.message);
        if ($('#messages li').length > 30)
          $('#messages li').eq(0).remove();
      });
    }

    $(function()
      {
        var socket = io.connect();
        InitChat(socket);

        var Anim = new anim();
        Anim.Init("field");
        Anim.UnitAdd(new battlefield_dark());

        Anim.Run("field");
      })
  </script>
</head>

<body>
  <table width="100%" height="100%">
    <tr>
      <td width="80%" id="field"></td>
      <td width="20%">
        <div>
          <ul id="messages"></ul>
          <form id="chat_form" action="">
            <input type="text" id="msg" autocomplete="off"/><button>Say</button>
          </form>
        </div>
      </td>
    </tr>
  </table>
</body>

</html>